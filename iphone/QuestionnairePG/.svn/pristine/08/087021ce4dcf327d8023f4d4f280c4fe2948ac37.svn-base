/*
 2017年5月4日 16:40:50
 byx
 评估管理-问卷模块的dao层
 * */

var mysql = require('mysql');
var $conf = require('../../conf/db');
var $util = require('../../util/util');
var $writelog = require('../../libs/logHelper');
var $mysqlUtil = require('../../util/mysqlUtil');
var $sql = require('./baseQuestionSqlMapping');

// 使用连接池，提升性能
var pool = mysql.createPool($util.extend({}, $conf.mysql));

module.exports = {
    //添加问卷
    insertQuestionnaire: function (questionnaire_id,questionnaire_name,descript,load_user_id,create_time,use_role,json,type,style_json,endingmode,p_state,progresstype,pagejson,pagesize,callback) {
        var sql = $sql.insertQuestionnaire(questionnaire_id,questionnaire_name,descript,load_user_id,create_time,use_role,json,type,style_json,endingmode,p_state,progresstype,pagejson,pagesize);
        $mysqlUtil.queryStrSql(sql, callback);
    },

    //修改问卷
    updateQuestionnaire: function (questionnaire_id,commun_name,commun_value,callback) {
        var sql = $sql.updateQuestionnaire(questionnaire_id,commun_name,commun_value);
        $mysqlUtil.queryStrSql(sql, callback);
    },

    //删除问卷
    deleteQuestionnaire: function (questionnaire_id,callback) {
        var sql = $sql.deleteQuestionnaire(questionnaire_id);
        $mysqlUtil.queryStrSql(sql, callback);
    },

    //问卷列表
    selectQuestionnaireList:function (user_id,questionnaire_name,pagenum,pagesize,callback) {
        var sql = $sql.selectQuestionnaireList(user_id,questionnaire_name,pagenum,pagesize);
        $mysqlUtil.queryStrSql(sql, callback);
    },


    //问卷列表分页
    selectQuestionnaireListRow:function (user_id,questionnaire_name,callback) {
        var sql = $sql.selectQuestionnaireListRow(user_id,questionnaire_name);
        $mysqlUtil.queryStrSql(sql, callback);
    },


    //问卷详情
    selectQuestionnaireInfo:function (questionnaire_id,callback) {
        var sql = $sql.selectQuestionnaireInfo(questionnaire_id);
        $mysqlUtil.queryStrSql(sql, callback);
    },


    //添加题目
    insertQuestion: function (question_id,questionnaire_id,q_order,q_score,q_type,content,create_time,stand_id,rule,option_order,q_imgurl,q_turn,q_logicjson,q_displayset,isbaseinfo,callback) {
        var sql = $sql.insertQuestion(question_id,questionnaire_id,q_order,q_score,q_type,content,create_time,stand_id,rule,option_order,q_imgurl,q_turn,q_logicjson,q_displayset,isbaseinfo);
        $mysqlUtil.queryStrSql(sql, callback);
    },

    //修改题目
    updateQuestion: function (question_id,commun_name,commun_value,callback) {
        var sql = $sql.updateQuestion(question_id,commun_name,commun_value);
        $mysqlUtil.queryStrSql(sql, callback);
    },

    //删除问卷题目
    deleteQuestion: function (question_id,callback) {
        var sql = $sql.deleteQuestion(question_id);
        $mysqlUtil.queryStrSql(sql, callback);
    },

    //查询问卷题目
    selectQuestionList:function (questionnaire_id,content,pagenum,pagesize,callback) {
        var sql = $sql.selectQuestionList(questionnaire_id,content,pagenum,pagesize);
        $mysqlUtil.queryStrSql(sql, callback);
    },


    //问卷题目分页
    selectQuestionListRow:function (questionnaire_id,content,callback) {
        var sql = $sql.selectQuestionListRow(questionnaire_id,content);
        $mysqlUtil.queryStrSql(sql, callback);
    },


    //题目详情
    selectQuestionInfo:function (question_id,callback) {
        var sql = $sql.selectQuestionInfo(question_id);
        $mysqlUtil.queryStrSql(sql, callback);
    },


    //添加选项
    insertQuestionOption: function (option_id,option_content,option_order,option_score,questionnaire_id,question_id,option_imgurl,option_toquestnum,callback) {
        var sql = $sql.insertQuestionOption(option_id,option_content,option_order,option_score,questionnaire_id,question_id,option_imgurl,option_toquestnum);
        $mysqlUtil.queryStrSql(sql, callback);
    },

    //修改选项
    updateQuestionOption: function (option_id,commun_name,commun_value,callback) {
        var sql = $sql.updateQuestionOption(option_id,commun_name,commun_value);
        $mysqlUtil.queryStrSql(sql, callback);
    },

    //删除选项
    deleteQuestionOption: function (option_id,callback) {
        var sql = $sql.deleteQuestionOption(option_id);
        $mysqlUtil.queryStrSql(sql, callback);
    },

    //查询问卷题目所有选项并且按照顺序递增排序
    selectQuestionOptionList:function (questionnaire_id,question_id,callback) {
        var sql = $sql.selectQuestionOptionList(questionnaire_id,question_id);
        $mysqlUtil.queryStrSql(sql, callback);
    },


};
