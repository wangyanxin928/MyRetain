/*
 2017年5月4日 16:40:50
 byx
 评估管理-问卷模块的dao层
 * */

var mysql = require('mysql');
var $conf = require('../../conf/db');
var $util = require('../../util/util');
var $writelog = require('../../libs/logHelper');
var $mysqlUtil = require('../../util/mysqlUtil');
var $sql = require('./importQuestionnairSqlMapping');

// 使用连接池，提升性能
var pool = mysql.createPool($util.extend({}, $conf.mysql));

module.exports = {
    //保存问卷信息
    saveQuestionnaire: function (questionnaireInfo, callback) {
        var sqls = $sql.saveQuestionnaire(questionnaireInfo);
        $mysqlUtil.queryArrSql(sqls, callback);
    },

    //保存问卷问题信息
    saveQuestion: function (questionInfo, callback) {
        var sql = $sql.saveQuestion(questionInfo);
        $mysqlUtil.queryStrSql(sql, callback);
    },

    //保存问卷选项信息
    saveOption: function (optionInfo, callback) {
        var sql = $sql.saveOption(optionInfo);
        $mysqlUtil.queryStrSql(sql, callback);
    },

    //获取问卷详情
    getQuestionnaire: function (getQuestoinnaireId, callback) {
        var sql = $sql.getQuestionnaire(getQuestoinnaireId);
        $mysqlUtil.queryStrSql(sql, callback);
    },

    //获取问卷关联学段-问卷管理 by byx
    getQuestionnaireXueduan: function (questionnaireItem, callback) {
        var sql = $sql.getQuestionnaireXueduan(questionnaireItem);
        $mysqlUtil.queryStrSql(sql, callback);
    },

    /*获取问卷所有问题*/
    getQuestionnaireQuestion:function(questionnaire_id, callback){
        var sql = $sql.getQuestionnaireQuestion(questionnaire_id);
        $mysqlUtil.queryStrSql(sql, callback);
    },

    /*获取问卷问题答案选项*/
    getQuestionOption:function(questoin_id, callback){
        var sql = $sql.getQuestionOption(questoin_id);
        $mysqlUtil.queryStrSql(sql, callback);
    },

    //删除问卷
    removeQuestionnaire: function (param, callback) {
        var sqlArr = $sql.removeQuestionnaire(param);
        $mysqlUtil.queryArrSql(sqlArr, callback);
    },
};
