/*
 2017年5月4日 16:40:50
 byx
 评估管理-问卷模块的dao层,sql语句
 * */

var baseQuestion = {
    //添加问卷
    insertQuestionnaire: function (questionnaire_id,questionnaire_name,descript,load_user_id,create_time,use_role,json,type,style_json,endingmode,p_state,progresstype,pagejson,pagesize) {
        var sql = "INSERT INTO questionnaire(questionnaire_id,questionnaire_name,descript,load_user_id,create_time,use_role,json,type,style_json,endingmode,p_state,progresstype,pagejson,pagesize)" +
            " VALUES(" +
            "'"+questionnaire_id+"','"+questionnaire_name+"','"+descript+"','"+load_user_id+
            "','" +create_time+"',"+use_role+",'"+json+"',"+type+",'"+style_json+"',"+endingmode+","+p_state+","+progresstype+",'"+pagejson+"',"+pagesize+"" +
            ")";
        return sql;
    },

    //修改问卷
    updateQuestionnaire: function (questionnaire_id,commun_name,commun_value) {
        var sql = "  UPDATE questionnaire SET "+commun_name+" = '"+commun_value+"' WHERE questionnaire_id ='"+questionnaire_id+"' ";
        return sql;
    },

    //删除问卷
    deleteQuestionnaire: function (questionnaire_id) {
        var sql = " DELETE FROM questionnaire WHERE questionnaire_id = '"+questionnaire_id+"' ";
        return sql;
    },

    //问卷列表
    selectQuestionnaireList:function (user_id,questionnaire_name,pagenum,pagesize) {
        var sql = "SELECT * FROM questionnaire WHERE 1=1";
        if(user_id != '-1'){
            sql+=" AND load_user_id = '"+user_id+"'"
        }

        if(questionnaire_name != '-1'){
            sql+=" AND questionnaire_name LIKE '%"+questionnaire_name+"%'"
        }

        sql+=" ORDER BY create_time DESC LIMIT "+pagenum+","+pagesize+"";

        return sql;
    },

    //问卷列表分页
    selectQuestionnaireListRow:function (user_id,questionnaire_name) {
        var sql = "SELECT COUNT(*) num FROM questionnaire WHERE 1=1";
        if(user_id != '-1'){
            sql+=" AND load_user_id = '"+user_id+"'"
        }

        if(questionnaire_name != '-1'){
            sql+=" AND questionnaire_name LIKE '%"+questionnaire_name+"%'"
        }

        return sql;
    },

    //问卷详情
    selectQuestionnaireInfo:function (questionnaire_id) {
        var sql = "SELECT * FROM questionnaire WHERE questionnaire_id='"+questionnaire_id+"'";
        return sql;
    },

    //添加题目
    insertQuestion: function (question_id,questionnaire_id,q_order,q_score,q_type,content,create_time,stand_id,rule,option_order,q_imgurl,q_turn,q_logicjson,q_displayset,isbaseinfo) {
       var sql = 'INSERT INTO questionnaire_question(' +
           'question_id,questionnaire_id,q_order,q_score,q_type,content,create_time,stand_id,rule,' +
           'option_order,q_imgurl,q_turn,q_logicjson,q_displayset,isbaseinfo) ' +
           'VALUES(' +
           '"'+question_id+'","'+questionnaire_id+'",'+q_order+',"'+q_score+'","'+q_type+'","'+content+'","'+create_time+'","'+stand_id+'",'+rule+','+option_order+',"'+q_imgurl+'",' +
           '"'+q_turn+'","'+q_logicjson+'","'+q_displayset+'",'+isbaseinfo+'' +
           ')';
        return sql;
    },

    //修改题目
    updateQuestion: function (question_id,commun_name,commun_value) {
        var sql = "  UPDATE questionnaire_question SET "+commun_name+" = '"+commun_value+"' WHERE question_id ='"+question_id+"' ";
        return sql;
    },

    //删除问卷题目
    deleteQuestion: function (question_id) {
        var sql = " DELETE FROM questionnaire_question WHERE question_id = '"+question_id+"' ";
        return sql;
    },

    //查询问卷题目
    selectQuestionList:function (questionnaire_id,content,pagenum,pagesize) {
        var sql = "SELECT * FROM questionnaire_question WHERE 1=1";
        if(questionnaire_id != '-1'){
            sql+=" AND questionnaire_id = '"+questionnaire_id+"'"
        }

        if(content != '-1'){
            sql+=" AND content LIKE '%"+content+"%'"
        }

        sql+=" ORDER BY q_turn LIMIT "+pagenum+","+pagesize+"";

        return sql;
    },


    //问卷题目分页
    selectQuestionListRow:function (questionnaire_id,content) {
        var sql = "SELECT COUNT(*) num FROM questionnaire_question WHERE 1=1";
        if(questionnaire_id != '-1'){
            sql+=" AND questionnaire_id = '"+questionnaire_id+"'"
        }

        if(content != '-1'){
            sql+=" AND content LIKE '%"+content+"%'"
        }

        return sql;
    },

    //题目详情
    selectQuestionInfo:function (question_id) {
        var sql = "SELECT * FROM questionnaire_question WHERE question_id='"+question_id+"'";
        return sql;
    },

    //添加选项
    insertQuestionOption: function (option_id,option_content,option_order,option_score,questionnaire_id,question_id,option_imgurl,option_toquestnum) {
        var sql = 'INSERT INTO question_options(option_id,option_content,option_order,option_score,questionnaire_id,question_id,option_imgurl,option_toquestnum) VALUES(' +
            '"'+option_id+'","'+option_content+'",'+option_order+',"'+option_score+'","'+questionnaire_id+'","'+question_id+'","'+option_imgurl+'","'+option_toquestnum+'"' +
            ')';
        return sql;
    },

    //修改选项
    updateQuestionOption: function (option_id,commun_name,commun_value) {
        var sql = "  UPDATE question_options SET "+commun_name+" = '"+commun_value+"' WHERE option_id ='"+option_id+"' ";
        return sql;
    },

    //删除选项
    deleteQuestionOption: function (option_id) {
        var sql = " DELETE FROM question_options WHERE option_id = '"+option_id+"' ";
        return sql;
    },

    //查询问卷题目所有选项并且按照顺序递增排序
    selectQuestionOptionList:function (questionnaire_id,question_id) {
        var sql = "SELECT * FROM question_options WHERE 1=1";
        if(questionnaire_id != '-1'){
            sql+=" AND questionnaire_id = '"+questionnaire_id+"'"
        }

        if(question_id != '-1'){
            sql+=" AND question_id = '"+question_id+"'"
        }

        sql+=" ORDER BY option_order";

        return sql;
    },


};

module.exports = baseQuestion;